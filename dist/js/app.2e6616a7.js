(function(e){function t(t){for(var n,u,o=t[0],c=t[1],i=t[2],l=0,f=[];l<o.length;l++)u=o[l],Object.prototype.hasOwnProperty.call(a,u)&&a[u]&&f.push(a[u][0]),a[u]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);p&&p(t);while(f.length)f.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=u(u.s=r[0]))}return e}var n={},a={app:0},s=[];function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}u.m=e,u.c=n,u.d=function(e,t,r){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(u.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)u.d(r,n,function(t){return e[t]}.bind(null,n));return r},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var p=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"03b8":function(e,t,r){},"08e2":function(e,t,r){"use strict";r("6e5c")},"21bb":function(e,t,r){"use strict";r("2dad")},"2dad":function(e,t,r){},5452:function(e,t,r){"use strict";r("af35")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},s=[],u={name:"App",created:function(){this.$store.dispatch("FETCH_RESOURCE_TYPES")}},o=u,c=(r("5c0b"),r("2877")),i=Object(c["a"])(o,a,s,!1,null,null,null),p=i.exports,l=r("8c4f"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.resourceTypes.length?r("div",{staticClass:"home"},[r("app-header",{attrs:{resourceTypes:e.resourceTypes}}),r("div",{staticClass:"app-content"},[r("div",{directives:[{name:"show",rawName:"v-show",value:"Home"===e.$route.name,expression:"$route.name ==='Home'"}],staticClass:"center-column-aligned"},[e._v(" Some message can go here ")]),r("router-view",{key:e.$route.fullPath})],1)],1):e._e()},d=[],m=(r("d81d"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"center-column-aligned header"},[r("span",{staticClass:"title-text"},[e._v("Star Wars Database")]),r("div",{staticClass:"nav"},e._l(e.resourceTypes,(function(t){return r("router-link",{key:t,staticClass:"nav-link hover-higlight",attrs:{to:{name:"resource-page",query:{page:1},params:{resourceType:t}}}},[e._v(" "+e._s(t.toUpperCase())+" ")])})),1)])}),v=[],g={name:"AppHeader",props:["resourceTypes"]},h=g,y=(r("5452"),Object(c["a"])(h,m,v,!1,null,null,null)),b=y.exports,_={name:"Home",components:{AppHeader:b},computed:{resourceTypes:function(){return this.$store.getters.resourceTypes.map((function(e){return e.name}))}}},T=_,O=(r("21bb"),Object(c["a"])(T,f,d,!1,null,null,null)),w=O.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"center-column-aligned"},[r("section",{staticClass:"resources-page-content "},[e.loading?r("div",{staticClass:"loading"},[e._v("LOADING...")]):r("div",{staticClass:"data scrollbar"},[r("ul",{staticClass:"center-column-aligned"},e._l(e.resources,(function(t){return r("router-link",{key:t.name,staticClass:"resource-link hover-higlight",attrs:{to:{name:"resource-details",params:{resourceName:t.name||t.title,resourceType:e.resourceType}}}},[e._v(" "+e._s(t.name||t.title)+" ")])})),1)])]),r("footer",{staticClass:"pagination"},[r("div",{staticClass:"previous"},[e.previous?r("router-link",{attrs:{to:e.previous}},[e._v(" Previous ")]):e._e()],1),r("div",{staticClass:"page-num"},[e._v("Page "+e._s(e.page))]),r("div",{staticClass:"next"},[e.next?r("router-link",{attrs:{to:e.next}},[e._v(" Next ")]):e._e()],1)])])},E=[],j=r("1da1"),C=(r("96cf"),r("7db0"),r("4de4"),r("a9e3"),r("ac1f"),r("5319"),{name:"ResourcePage",data:function(){return{loading:!1}},computed:{next:function(){var e;return null!==(e=this.pageMeta)&&void 0!==e&&e.next?{name:"resource-page",params:{resourceType:this.resourceType},query:{page:this.page+1}}:null},previous:function(){var e;return null!==(e=this.pageMeta)&&void 0!==e&&e.previous?{name:"resource-page",params:{resourceType:this.resourceType},query:{page:this.page-1}}:null},resources:function(){var e,t,r=this;return null!==(e=null===(t=this.$store.getters.resources.find((function(e){return e.type===r.resourceType})))||void 0===t?void 0:t.items.filter((function(e){return e.page===r.page})))&&void 0!==e?e:[]},resourceType:function(){return this.$route.params.resourceType},pageMeta:function(){var e,t=this;return null===(e=this.$store.getters.resourcesMeta.find((function(e){return e.type===t.resourceType})))||void 0===e?void 0:e.items.find((function(e){return e.page===t.page}))},page:function(){var e,t,r=null!==(e=null===(t=this.$route.query)||void 0===t?void 0:t.page)&&void 0!==e?e:1;return Number(r)}},watch:{page:{immediate:!0,handler:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$store.dispatch("FETCH_RESOURCES",{type:e.resourceType,page:e.page});case 4:e.loading=!1,t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](1),e.loading=!1,e.$router.replace({name:"Home"});case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))()}}}}),k=C,R=(r("08e2"),Object(c["a"])(k,x,E,!1,null,null,null)),S=R.exports,$=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"resource-details scrollbar"},e._l(e.details,(function(t){return r("div",{key:t.key,staticClass:"detail"},[r("p",{staticClass:"detail-key"},[e._v(e._s(t.label))]),r("code",{staticClass:"detail-value"},[e._v(e._s(t.value))])])})),0)},M=[],H=r("3835"),P=(r("4fad"),r("caad"),{name:"ResourceDetails",data:function(){return{resource:{}}},props:["url"],mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.getters.resourceTypes.find((function(t){return t.name===e.resourceType})),t.prev=1,t.next=4,e.$store.dispatch("FETCH_RESOURCE_BY_NAME",{type:e.resourceType,name:e.resourceName});case 4:n=t.sent,n?e.resource=n:e.$router.replace({name:"resource-page",params:{resourceType:r.name,resourceName:""},query:{page:1}}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$router.replace({name:"Home"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()},computed:{details:function(){return Object.entries(this.resource).filter((function(e){var t=Object(H["a"])(e,1),r=t[0];return!["created","edited","url","page"].includes(r)})).map((function(e){var t=Object(H["a"])(e,2),r=t[0],n=t[1],a=r.replace(/_/g," ");return{key:r,label:a,value:n}}))},resourceType:function(){return this.$route.params.resourceType},resourceName:function(){return this.$route.params.resourceName}}}),N=P,U=(r("b8f1"),Object(c["a"])(N,$,M,!1,null,null,null)),q=U.exports;n["a"].use(l["a"]);var A,F,D=new l["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Home",component:w,children:[{path:"/:resourceType",name:"resource-page",component:S},{path:"/:resourceType/:resourceName",name:"resource-details",component:q}]}]}),Y=r("2f62"),B=r("ade3"),J=r("5530"),L=(r("d3b7"),r("99af"),"FETCH_RESOURCES"),G="FETCH_RESOURCE_BY_NAME",I="FETCH_RESOURCE_TYPES",W="SET_RESOURCES",z="SET_RESOURCES_META",K="SET_RESOURCE_TYPES",Q=3e5,V=(A={},Object(B["a"])(A,L,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a,s,u,o,c,i,p,l,f,d,m,v,g,h,y,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(s=e.commit,u=e.state,o=t.type,c=t.page,i=null===(n=u.resources.find((function(e){return e.type===o})))||void 0===n?void 0:n.items.filter((function(e){return e.page===c})),p=null===(a=u.resourcesMeta.find((function(e){return e.type===o})))||void 0===a?void 0:a.items.find((function(e){return e.page===c})),l=(null===p||void 0===p?void 0:p.timestamp)<=(new Date).getTime()-Q,null!==i&&void 0!==i&&i.length&&!l){r.next=27;break}if(f=u.resourceTypes.find((function(e){return e.name===o})),null===f||void 0===f||!f.url){r.next=26;break}return r.next=10,fetch("".concat(f.url,"?page=").concat(c));case 10:if(d=r.sent,!(d.status<400)){r.next=21;break}return r.next=14,d.json();case 14:m=r.sent,v=m.results,g=m.next,h=m.previous,y=v.map((function(e){return Object(J["a"])(Object(J["a"])({},e),{},{page:c})})),s(W,{type:o,page:c,resources:y}),s(z,{type:o,page:c,meta:{page:c,next:!!g,previous:!!h,timestamp:(new Date).getTime()}}),r.next=24;break;case 21:throw b=new Error("Status code ".concat(d.status,"; could not complete that request")),b.code=d.status,b;case 24:r.next=27;break;case 26:throw new Error("The resource you are looking for does not exist");case 27:case"end":return r.stop()}}),r)})))()})),Object(B["a"])(A,G,(function(e,t){return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,a,s,u,o,c,i,p,l,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=e.state,s=t.type,u=t.name,o=null===(n=a.resources.find((function(e){return e.type===s})))||void 0===n?void 0:n.items.find((function(e){return e.name===u})),!o){r.next=5;break}return r.abrupt("return",o);case 5:if(c=a.resourceTypes.find((function(e){return e.name===s})),null===c||void 0===c||!c.url){r.next=19;break}return r.next=9,fetch("".concat(c.url,"?search=").concat(u));case 9:if(i=r.sent,!(i.status<400)){r.next=16;break}return r.next=13,i.json();case 13:return p=r.sent,l=p.results,r.abrupt("return",l[0]);case 16:throw f=new Error("Status code ".concat(i.status,"; could not complete that request")),f.code=i.status,f;case 19:throw new Error("The resource you are looking for does not exist");case 20:case"end":return r.stop()}}),r)})))()})),Object(B["a"])(A,I,(function(e){return Object(j["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.next=3,fetch("https://swapi.dev/api/");case 3:return n=t.sent,t.next=6,n.json();case 6:a=t.sent,r(K,Object.entries(a).map((function(e){var t=Object(H["a"])(e,2),r=t[0],n=t[1];return{name:r.toLowerCase(),url:n}})));case 8:case"end":return t.stop()}}),t)})))()})),A),X=r("2909"),Z=(F={},Object(B["a"])(F,W,(function(e,t){var r=t.type,n=t.resources,a=t.page,s=e.resources.find((function(e){return e.type===r}));if(s){var u=s.items.filter((function(e){return e.page!==a}));s.items=[].concat(Object(X["a"])(u),Object(X["a"])(n))}else e.resources.push({type:r,items:n})})),Object(B["a"])(F,z,(function(e,t){var r=t.type,n=t.meta,a=t.page,s=e.resourcesMeta.find((function(e){return e.type===r}));if(s){var u=s.items.filter((function(e){return e.page!==a}));s.items=[].concat(Object(X["a"])(u),[n])}else e.resourcesMeta.push({type:r,items:[n]})})),Object(B["a"])(F,K,(function(e,t){e.resourceTypes=t})),F),ee={resources:function(e){return e.resources},resourcesMeta:function(e){return e.resourcesMeta},resourceTypes:function(e){return e.resourceTypes}},te={resources:[],resourcesMeta:[],resourceTypes:[]};n["a"].use(Y["a"]);var re=new Y["a"].Store({state:te,mutations:Z,actions:V,getters:ee});r("7361");n["a"].config.productionTip=!1,new n["a"]({router:D,store:re,render:function(e){return e(p)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"6e5c":function(e,t,r){},7361:function(e,t,r){},"9c0c":function(e,t,r){},af35:function(e,t,r){},b8f1:function(e,t,r){"use strict";r("03b8")}});
//# sourceMappingURL=app.2e6616a7.js.map